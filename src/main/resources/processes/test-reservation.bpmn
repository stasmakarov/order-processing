<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:jmix="http://jmix.io/schema/bpm/bpmn" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" xmlns:flowable="http://flowable.org/bpmn" xmlns:xsd="http://www.w3.org/2001/XMLSchema" targetNamespace="http://www.flowable.org/processdef" xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL http://www.omg.org/spec/BPMN/2.0/20100501/BPMN20.xsd">
  <process id="test-reservation" name="Test reservation" isExecutable="true">
    <startEvent id="startEvent1">
      <extensionElements>
        <jmix:formData type="input-dialog" openMode="DIALOG">
          <jmix:formFields>
            <jmix:formField id="order" caption="Order" type="entity" editable="true" required="false">
              <jmix:formFieldProperty name="entityName" value="ord_Order" />
              <jmix:formFieldProperty name="uiComponent" value="entityPicker" />
              <jmix:formFieldProperty name="lookupScreen" value="ord_Order.list" />
            </jmix:formField>
          </jmix:formFields>
        </jmix:formData>
      </extensionElements>
      <outgoing>Flow_18mw2sc</outgoing>
    </startEvent>
    <sequenceFlow id="Flow_18mw2sc" sourceRef="startEvent1" targetRef="Activity_1vi04sp" />
    <callActivity id="Activity_1vi04sp" name="Resevation &#38; payment" calledElement="reservation-and-payment" flowable:inheritVariables="true">
      <incoming>Flow_18mw2sc</incoming>
      <outgoing>Flow_0e1sa74</outgoing>
    </callActivity>
    <endEvent id="success">
      <incoming>Flow_0e1sa74</incoming>
    </endEvent>
    <sequenceFlow id="Flow_0e1sa74" sourceRef="Activity_1vi04sp" targetRef="success" />
    <subProcess id="Activity_1t54w7t" triggeredByEvent="true">
      <startEvent id="Event_0xacmtd">
        <outgoing>Flow_1fb0ses</outgoing>
        <errorEventDefinition id="ErrorEventDefinition_1w126r9" errorRef="payment-error" />
      </startEvent>
      <sequenceFlow id="Flow_1fb0ses" sourceRef="Event_0xacmtd" targetRef="Activity_0mmqr4g" />
      <scriptTask id="Activity_0mmqr4g" scriptFormat="groovy">
        <incoming>Flow_1fb0ses</incoming>
        <outgoing>Flow_1bqvraz</outgoing>
        <script>println "some error"</script>
      </scriptTask>
      <endEvent id="Event_0qafo00">
        <incoming>Flow_1bqvraz</incoming>
      </endEvent>
      <sequenceFlow id="Flow_1bqvraz" sourceRef="Activity_0mmqr4g" targetRef="Event_0qafo00" />
    </subProcess>
    <boundaryEvent id="Event_0ydkal0" attachedToRef="Activity_1vi04sp">
      <errorEventDefinition id="ErrorEventDefinition_0iednz9" errorRef="payment-error" />
    </boundaryEvent>
  </process>
  <error id="reservation-error" name="Reservation error" errorCode="901" />
  <error id="payment-error" name="Payment error" errorCode="902" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_process">
    <bpmndi:BPMNPlane id="BPMNPlane_process" bpmnElement="test-reservation">
      <bpmndi:BPMNShape id="BPMNShape_startEvent1" bpmnElement="startEvent1">
        <omgdc:Bounds x="162" y="150" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1jcijyw_di" bpmnElement="Activity_1vi04sp">
        <omgdc:Bounds x="240" y="128" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_02jtcj3_di" bpmnElement="success">
        <omgdc:Bounds x="382" y="150" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0scb2lc_di" bpmnElement="Activity_1t54w7t" isExpanded="true">
        <omgdc:Bounds x="115" y="300" width="350" height="200" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1a7j0eu_di" bpmnElement="Event_0xacmtd">
        <omgdc:Bounds x="155" y="382" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0m6hydw_di" bpmnElement="Activity_0mmqr4g">
        <omgdc:Bounds x="245" y="360" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0qafo00_di" bpmnElement="Event_0qafo00">
        <omgdc:Bounds x="407" y="382" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_1fb0ses_di" bpmnElement="Flow_1fb0ses">
        <omgdi:waypoint x="191" y="400" />
        <omgdi:waypoint x="245" y="400" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1bqvraz_di" bpmnElement="Flow_1bqvraz">
        <omgdi:waypoint x="345" y="400" />
        <omgdi:waypoint x="407" y="400" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Event_1dwxs5o_di" bpmnElement="Event_0ydkal0">
        <omgdc:Bounds x="322" y="190" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_18mw2sc_di" bpmnElement="Flow_18mw2sc">
        <omgdi:waypoint x="198" y="168" />
        <omgdi:waypoint x="240" y="168" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0e1sa74_di" bpmnElement="Flow_0e1sa74">
        <omgdi:waypoint x="340" y="168" />
        <omgdi:waypoint x="382" y="168" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>
